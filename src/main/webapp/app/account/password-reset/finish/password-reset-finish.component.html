<div class="finish-main">
  <div class="session">
    <div class="info">
      <div class="alert" *ngIf="keyMissing">
        <strong>The password reset key is missing.</strong>
      </div>

      <div class="alert" *ngIf="error">
        Your password couldn't be reset. Remember a password request is only valid for 24 hours.
      </div>

      <div class="alert" *ngIf="success">
        <span><strong>Your password has been reset.</strong> Please </span>
        <a routerLink="/" class="forgot">sign in</a>.
      </div>

      <div class="alert" *ngIf="doNotMatch">
        The password and its confirmation do not match!
      </div>
    </div>

    <form autocomplete="off" *ngIf="!keyMissing && !success" name="form" role="form" (ngSubmit)="finishReset()" [formGroup]="passwordForm">
      <h4>Reset your password</h4>
      <div class="floating-label">
        <input placeholder="New password" type="password" name="password" id="password" autocomplete="off" formControlName="newPassword" />
        <label for="password">New password:</label>
        <div class="icon">
          <svg
            enable-background="new 0 0 100 100"
            version="1.1"
            viewBox="0 0 100 100"
            xml:space="preserve"
            xmlns="http://www.w3.org/2000/svg"
          >
            <style type="text/css">
              .st0 {
                fill: none;
              }
            </style>
            <g transform="translate(0 -952.36)">
              <path
                stroke="#ddd"
                fill="#ddd"
                d="m17.5 977c-1.3 0-2.4 1.1-2.4 2.4v45.9c0 1.3 1.1 2.4 2.4 2.4h64.9c1.3 0 2.4-1.1 2.4-2.4v-45.9c0-1.3-1.1-2.4-2.4-2.4h-64.9zm2.4 4.8h60.2v1.2l-30.1 22-30.1-22v-1.2zm0 7l28.7 21c0.8 0.6 2 0.6 2.8 0l28.7-21v34.1h-60.2v-34.1z"
              />
            </g>
            <rect class="st0" width="100" height="100" />
          </svg>
        </div>
      </div>

      <div style="height: 25px;">
        <div style="margin-left: 56px;">
          <ng-container
            *ngIf="
              passwordForm.get('newPassword').invalid && (passwordForm.get('newPassword').dirty || passwordForm.get('newPassword').touched)
            "
          >
            <small class="form-text" *ngIf="passwordForm.get('newPassword').errors.required">
              Your password is required.
            </small>
            <small class="form-text" *ngIf="passwordForm.get('newPassword').errors.minlength">
              Your password is required to be at least 4 characters.
            </small>
            <small class="form-text" *ngIf="passwordForm.get('newPassword').errors.maxlength">
              Your password cannot be longer than 50 characters.
            </small>
          </ng-container>
        </div>
      </div>

      <div class="floating-label">
        <input
          placeholder="Confirm the new password"
          type="password"
          name="confirmPassword"
          id="confirmPassword"
          autocomplete="off"
          formControlName="confirmPassword"
        />
        <label for="confirmPassword">Confirm the new password:</label>
        <div class="icon">
          <svg
            enable-background="new 0 0 100 100"
            version="1.1"
            viewBox="0 0 100 100"
            xml:space="preserve"
            xmlns="http://www.w3.org/2000/svg"
          >
            <style type="text/css">
              .st0 {
                fill: none;
              }
            </style>
            <g transform="translate(0 -952.36)">
              <path
                stroke="#ddd"
                fill="#ddd"
                d="m17.5 977c-1.3 0-2.4 1.1-2.4 2.4v45.9c0 1.3 1.1 2.4 2.4 2.4h64.9c1.3 0 2.4-1.1 2.4-2.4v-45.9c0-1.3-1.1-2.4-2.4-2.4h-64.9zm2.4 4.8h60.2v1.2l-30.1 22-30.1-22v-1.2zm0 7l28.7 21c0.8 0.6 2 0.6 2.8 0l28.7-21v34.1h-60.2v-34.1z"
              />
            </g>
            <rect class="st0" width="100" height="100" />
          </svg>
        </div>
      </div>
      <div style="height: 25px;">
        <div style="margin-left: 56px;">
          <ng-container
            *ngIf="
              passwordForm.get('confirmPassword').invalid &&
              (passwordForm.get('confirmPassword').dirty || passwordForm.get('confirmPassword').touched)
            "
          >
            <small class="form-text" *ngIf="passwordForm.get('confirmPassword').errors.required">
              Your password confirmation is required.
            </small>
            <small class="form-text" *ngIf="passwordForm.get('confirmPassword').errors.minlength">
              Your password is required to be at least 4 characters.
            </small>
            <small class="form-text" *ngIf="passwordForm.get('confirmPassword').errors.maxlength">
              Your password cannot be longer than 50 characters.
            </small>
          </ng-container>
        </div>
      </div>

      <button type="submit" [disabled]="passwordForm.invalid">Reset Password</button>

      <p class="forgot">
        <a routerLink="/" class="forgot">Back to login</a>
      </p>
    </form>
  </div>
</div>
