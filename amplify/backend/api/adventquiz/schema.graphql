# https://docs.amplify.aws/angular/build-a-backend/graphqlapi/customize-authorization-rules/

type Todo @model @auth(rules: [{allow: owner}]) {
    id: ID!
    owner: String @auth(rules: [{allow: owner, operations: [read]}])
    name: String!
    description: String
}

type Question
    @model
    @auth(rules: [{allow: private, operations: [read]}, {allow: groups, groups: ["Admins"]}]) {
    id: ID!
    text: String!
    choices: String!
    icon: String!
    correctAnswer: String!
    openTime: AWSDateTime!
    closeTime: AWSDateTime!
    answers: [Answer!]! @hasMany
}

type Answer
    @model
    @auth(rules: [{allow: owner, operations: [read]}, {allow: groups, groups: ["Admins"]}]) {
    id: ID!
    owner: String
    text: String! @auth(rules: [{allow: owner}, {allow: groups, groups: ["Admins"]}])
    isCorrect: Boolean!
    points: Int!
    question: Question!
}

type Ranking @model @auth(rules: [{allow: private, operations: [read]}]) {
    id: ID!
    user: String!
    points: Int!
    correctAnswers: Int!
    allAnswers: Int!
}
